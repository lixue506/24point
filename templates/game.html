<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../static/img/favicon.ico">

    <title>Game</title>

    <!-- Bootstrap core CSS -->
    <link href="../static/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="../static/css/elusive-webfont.css" rel="stylesheet" >
    <link href="../static/css/animate.css" rel="stylesheet">
    <link href="../static/css/pe-icons.css" rel="stylesheet">
 	<link href="../static/css/style.css" rel="stylesheet">

    <link href='http://fonts.googleapis.com/css?family=Raleway:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>

    <script src="../static/js/jquery.min.js"></script>
	<script type="text/javascript" src="../static/js/modernizr.custom.js"></script>
    <script>
    window.onload = function() {
        document.body.addEventListener("click", myFunction);
    };
    function myFunction (e) {
        console.log(e.target.value);
        console.log(e.target.class);
        if (e.target.class == "num_cal") {
            var tmp = e.target.value;
            document.getElementById('cal').value += tmp;}
        else if (e.target.id == "back") {
            var tmp = document.getElementById('cal');
            if (tmp.value.length > 0) {
                tmp.value = tmp.value.substring(0, tmp.value.length - 1);
            }
            console.log(tmp.value.length);
        }
    }
   </script>
  </head>

<body data-spy="scroll" data-offset="0" data-target="#navbar-main">

	<div id="navbar-main">
		<div class="navbar navbar-default navbar-fixed-top">
			<div class="container">
				<div class="navbar-header">
					<a class="navbar-brand" href="index.html"><h1>24 POINT</h1></a>
				</div>
                <div class="navbar-collapse collapse" >
					<ul class="nav navbar-nav">
						<li class="dropdown">
							<a href="https://github.com/lixue506/24point" class="dropdown-toggle" data-toggle="dropdown">about</a>
                        </li>
                        <li class="dropdown">
							<a href="index.html" class="dropdown-toggle" data-toggle="dropdown">BACK</a>
                        </li>
                    </ul>
                </div>
			</div>
		</div>
    </div>

    <div id="headerwrap" name="home" class="fullheight">
		<header class="clearfix fullheight">
			<div class="vertical-center">
                <form name="random_num"></form>
                <input id="cal">
                <ul >
                <a class="btn homebtn smoothScroll">START</a>
                <a class="btn homebtn smoothScroll" onclick="location=location" id="reset">RESET</a>
                <a class="btn homebtn smoothScroll" id="submit" onclick="func()">SUBMIT</a>
                <a class="btn homebtn smoothScroll" id="help">HELP</a>
                <a class="btn homebtn smoothScroll" id="back">BACK</a>
                </ul>
	 		</div>
  		</header>
    </div>

<script>
    ope = ['+','-','*','/','(',')'];
    for (i = 0; i < 10; i++) {
        var str_html = document.createElement("input");
        str_html.type = "button";
        str_html.class = "num_cal";
        if(i < 6){str_html.value = ope[i];}
        else{str_html.value = Math.floor(Math.random()*10+1);}
        document.random_num.appendChild(str_html);
    }
</script>
<script>
function func() {
        $.ajax({
            url:'/game',
            type:'GET',
            data:{'a':$('cal_a').val(),'b':$("cal_b").val(), 'cal':$("cal").val()},
            dataType:'json',
            success:function (data) {
                str = ''
                for (var item in data) {
                   str = str + "<tr><th>"+data[item].id+"</th><th>"+data[item].times+"</th><th>"+data[item].name+"</th><th>"+data[item].score+"</th><th>"+data[item].rank+"</th><th>"+data[item].click+"</th></tr>"
                }$('#get_result').html(str)
            },
            error:function () {
                alert("ERROR!");
            }
        })
    }
</script>
	<script type="text/javascript" src="../static/js/bootstrap.js"></script>
    <script type="text/javascript" src="../static/js/plugins.js"></script>
	<script type="text/javascript" src="../static/js/init.js"></script>
  </body>
</html>
